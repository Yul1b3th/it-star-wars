import"./chunk-O7R62VNR.js";import{a as nt,b as c}from"./chunk-PM3GXYMW.js";import{$ as Q,C as z,D as B,F as G,L as C,M as g,P as J,R as K,S as I,W as a,X as n,Y as m,Z as $,a as P,aa as X,b as W,ca as l,ga as d,ha as Y,i as N,j as M,la as S,m as D,ma as Z,n as E,o as U,oa as y,pa as q,q as V,qa as _,ra as tt,t as u,ua as et,va as rt,w as v,wa as A,xa as ot,y as p,ya as it,za as k}from"./chunk-MUKIEXX6.js";var at=(()=>{let t=class t{constructor(o,e){this.router=o,this.accountService=e}canActivate(o,e){return this.accountService.userValue?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:e.url}}),!1)}};t.\u0275fac=function(e){return new(e||t)(v(rt),v(c))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var st=(()=>{let t=class t{constructor(o){this.accountService=o}intercept(o,e){return e.handle(o).pipe(D(i=>{[401,403].includes(i.status)&&this.accountService.userValue&&this.accountService.logout();let b=i.error?.message||i.statusText;return console.error(i),M(()=>b)}))}};t.\u0275fac=function(e){return new(e||t)(v(c))},t.\u0275prov=u({token:t,factory:t.\u0275fac});let r=t;return r})();var ct="angular-tutorial-users",x=JSON.parse(localStorage.getItem(ct))||[],yt=(()=>{let t=class t{intercept(o,e){let{url:i,method:b,headers:L,body:F}=o;return gt();function gt(){switch(!0){case(i.endsWith("/users/authenticate")&&b==="POST"):return St();case(i.endsWith("/users/register")&&b==="POST"):return kt();default:return e.handle(o)}}function St(){let{username:s,password:f}=F,T=x.find(j=>j.username===s&&j.password===f);return T?O(W(P({},xt(T)),{token:"fake-jwt-token"})):H("Username or password is incorrect")}function kt(){let s=F;return x.find(f=>f.username===s.username)?H('Username "'+s.username+'" is already taken'):(s.id=x.length?Math.max(...x.map(f=>f.id))+1:1,x.push(s),localStorage.setItem(ct,JSON.stringify(x)),O())}function O(s){return N(new Z({status:200,body:s})).pipe(E(500))}function H(s){return M(()=>({error:{message:s}})).pipe(V(),E(500),U())}function xt(s){let{id:f,username:T,firstName:j,lastName:Ct}=s;return{id:f,username:T,firstName:j,lastName:Ct}}}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=u({token:t,factory:t.\u0275fac});let r=t;return r})(),mt={provide:y,useClass:yt,multi:!0};var ut=(()=>{let t=class t{constructor(o){this.accountService=o}intercept(o,e){let i=this.accountService.userValue,b=i?.token,L=o.url.startsWith(nt.apiUrl);return b&&L&&(o=o.clone({setHeaders:{Authorization:`Bearer ${i.token}`}})),e.handle(o)}};t.\u0275fac=function(e){return new(e||t)(v(c))},t.\u0275prov=u({token:t,factory:t.\u0275fac});let r=t;return r})();var pt=[{path:"",title:"Star Wars",loadComponent:()=>import("./chunk-LTDWNNVG.js")},{path:"login",title:"Star Wars | Login",loadComponent:()=>import("./chunk-WM6LG45P.js")},{path:"register",title:"Register",loadComponent:()=>import("./chunk-3QYKMJKW.js")},{path:"starships",title:"Star Wars | Starships",loadComponent:()=>import("./chunk-UCUDYBHV.js"),canActivate:[at]},{path:"starship/:id",title:"Star Wars | Starship",loadComponent:()=>import("./chunk-FEOWXX7T.js")},{path:"**",title:"Star Wars",redirectTo:"",pathMatch:"full"}];var lt={providers:[it(pt),G(q),tt(),{provide:y,useClass:ut,multi:!0},{provide:y,useClass:st,multi:!0},mt]};function wt(r,t){r&1&&(a(0,"button",9),l(1,"LOG IN"),n())}function Tt(r,t){if(r&1){let bt=$();a(0,"button",10),Q("click",function(){z(bt);let e=X();return B(e.logout())}),l(1,"LOG OUT"),n()}}var dt=(()=>{let t=class t{constructor(o){this.accountService=o,this.accountService.user.subscribe(e=>this.user=e)}logout(){this.accountService.logout()}};t.\u0275fac=function(e){return new(e||t)(g(c))},t.\u0275cmp=p({type:t,selectors:[["app-header"]],standalone:!0,features:[d],decls:10,vars:2,consts:[[1,"px-5"],[1,"container-fluid","p-4","d-flex","justify-content-between","align-items-center","flex-wrap","gap-2"],["src","assets/networks.jpg","alt","Star Wars"],[1,"logo"],["routerLink",""],["src","assets/logo.png","alt","","height","80"],[1,"account"],["class","btn btn-link nav-item nav-link","routerLink","../login"],["class","btn btn-link nav-item nav-link"],["routerLink","../login",1,"btn","btn-link","nav-item","nav-link"],[1,"btn","btn-link","nav-item","nav-link",3,"click"]],template:function(e,i){e&1&&(a(0,"header",0)(1,"div",1)(2,"div"),m(3,"img",2),n(),a(4,"div",3)(5,"a",4),m(6,"img",5),n()(),a(7,"div",6),K(8,wt,2,0,"button",7)(9,Tt,2,0,"button",8),n()()()),e&2&&(C(8),I(8,i.user?-1:8),C(1),I(9,i.user?9:-1))},dependencies:[S,k,A],styles:[".account[_ngcontent-%COMP%]{width:262px;display:flex;justify-content:flex-end}"]});let r=t;return r})();var ft=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p({type:t,selectors:[["app-footer"]],standalone:!0,features:[d],decls:4,vars:0,consts:[[1,"container","text-center","p-5"],["src","assets/networks.jpg","alt","Star Wars"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"p"),l(2,"More From Star Wars:"),n(),m(3,"img",1),n())}});let r=t;return r})();var jt=()=>({exact:!0}),vt=(()=>{let t=class t{constructor(o){this.accountService=o,this.accountService.user.subscribe(e=>this.user=e)}logout(){this.accountService.logout()}};t.\u0275fac=function(e){return new(e||t)(g(c))},t.\u0275cmp=p({type:t,selectors:[["app-navbar"]],standalone:!0,features:[d],decls:12,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","border-white","border-top","border-bottom","p-0"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","mx-auto"],[1,"nav-item","border-end","border-start"],["routerLink","","routerLinkActive","active border-bottom border-2 border-primary",1,"nav-link",3,"routerLinkActiveOptions"],[1,"nav-item","border-end"],["routerLink","../starships","routerLinkActive","active border-bottom border-2 border-primary",1,"nav-link"]],template:function(e,i){e&1&&(a(0,"nav",0)(1,"div",1)(2,"button",2),m(3,"span",3),n(),a(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),l(8,"HOME"),n()(),a(9,"li",8)(10,"a",9),l(11,"STARSHIPS"),n()()()()()()),e&2&&(C(7),J("routerLinkActiveOptions",Y(1,jt)))},dependencies:[S,k,A,ot]});let r=t;return r})();var ht=(()=>{let t=class t{constructor(o){this.accountService=o,this.title="Star Wars",this.accountService.user.subscribe(e=>this.user=e)}logout(){this.accountService.logout()}};t.\u0275fac=function(e){return new(e||t)(g(c))},t.\u0275cmp=p({type:t,selectors:[["app-root"]],standalone:!0,features:[d],decls:5,vars:0,consts:[[1,"mt-auto"]],template:function(e,i){e&1&&(m(0,"app-header")(1,"app-navbar"),a(2,"div"),m(3,"router-outlet"),n(),m(4,"app-footer",0))},dependencies:[S,k,et,dt,ft,vt]});let r=t;return r})();_(ht,lt).catch(r=>console.error(r));
